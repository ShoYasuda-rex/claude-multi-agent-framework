---
name: audit
description: 監査系エージェントを一括実行（.cod / .sec / .arc / .law）
user_invocable: true
---

# /audit — 一括監査

リリース前の品質ゲートとして、監査エージェントを並列実行する。

---

## 1. 選択

AskUserQuestion（multiSelect: true）で実行する監査を選ばせる:

> どの監査を実行しますか？

| label | description |
|-------|------------|
| 全部実行（Recommended） | .cod + .sec + .arc + .law を一括実行 |
| コード監査（.cod） | 未使用コード・デッドコード・構造の問題 |
| セキュリティ監査（.sec） | 脆弱性・設定ミス・攻撃ベクトル |
| アーキテクチャ監査（.arc） | 設計判断の妥当性・リスク |
| 法令チェック（.law） | 法令違反リスク |

- 「全部実行」が選ばれた場合 → 4つ全て実行（他の選択は無視）
- それ以外 → 選択されたものだけ実行

---

## 2. 実行

選択された監査を **Task ツールのサブエージェントとして並列起動** する:

| 監査 | subagent_type |
|------|--------------|
| コード監査 | audit-code-checker |
| セキュリティ監査 | audit-security-checker |
| アーキテクチャ監査 | audit-architecture-checker |
| 法令チェック | audit-law-checker |

- 全て `run_in_background: true` で並列実行する
- 各エージェントの prompt は「プロジェクト全体を監査してレポートを出してください」
- 選択された Task 呼び出しを **1つのメッセージ内で同時に** 発行すること

---

## 3. 結果の集約

全サブエージェントの完了を TaskOutput で待ち、結果を統合レポートとして報告する:

```
## 監査結果サマリー

### コード監査（.cod）
[結果の要約]

### セキュリティ監査（.sec）
[結果の要約]

### アーキテクチャ監査（.arc）
[結果の要約]

### 法令チェック（.law）
[結果の要約]
```

- 実行しなかった監査のセクションは省略する
- 各セクションは要点を箇条書きで簡潔にまとめる
- 詳細は各エージェントのレポートファイルを参照
