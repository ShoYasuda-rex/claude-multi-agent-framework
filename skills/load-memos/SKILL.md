---
name: load-memos
description: メモをまとめてエクスポートし、アーカイブ
model: haiku
tools: Read, Glob, Write, Edit, Bash
user_invocable: true
---

# Load Memos（メモの一括エクスポート）

`.claude/memos/` にためたメモをまとめた `.md` ファイルを生成し、元ファイルをアーカイブする。

---

## 手順

### 1. メモファイルの取得

- `.claude/memos/*.md`（ルート直下のみ）を Glob で取得する（`done/` サブディレクトリは対象外）
- ファイルが見つからない場合:
  - 「未処理のメモがありません。`/save-memo` で記録してください」と案内して **終了**

### 2. ファイルの読み込み

- 各ファイルを Read し、タイトル（`#` 見出し）・登録日を抽出する
- ステータスが「未処理」のもののみ対象

### 3. 日時取得

- Bash で現在日時を取得する:
  - `date '+%Y-%m-%d'` → まとめファイル名用
  - `date '+%Y-%m-%d %H:%M'` → エクスポート日時用

### 4. まとめファイルの生成

プロジェクトルートに以下の内容で Write する:

- ファイル名: `{YYYY-MM-DD}_memos.md`

```markdown
# メモまとめ

- **エクスポート日:** {YYYY-MM-DD HH:mm}
- **件数:** {N} 件

---

## リスト

- [ ] {タイトル1}（{登録日}）
- [ ] {タイトル2}（{登録日}）
- [ ] {タイトル3}（{登録日}）
```

### 5. ステータス更新

対象の各ファイルのステータスを Edit で「未処理」→「エクスポート済」に更新する

### 6. done ディレクトリへ移動

- `.claude/memos/done/` ディレクトリがなければ Bash で作成する
- 対象ファイルを Bash の `mv` で `done/` に移動する

### 7. 完了報告

```
メモリストを生成しました: `{YYYY-MM-DD}_memos.md`（{N} 件）
```

1行だけ表示して **終了**。

---

## 禁止事項

- 「エクスポート済」ステータスのファイルを再処理しない
- まとめファイルの内容を編集・加工しない（ユーザーの入力そのままを保持）
- 記録後に「他にありますか？」等のフォローをしない
