---
name: research-team
description: 3視点（UX・コード・競合）で統合調査。実装モード付き
tools: Read, Glob, Grep, Write, Edit, Bash, Task, WebSearch, WebFetch, AskUserQuestion
user_invocable: true
---

# /research-team

3つの視点からサブエージェントで並列調査し、結果を統合して報告する。
オプションで調査結果をそのまま実装まで進められる。

## 調査員（サブエージェント — 使い捨て）

| 調査員 | 視点 | subagent_type |
|--------|------|---------------|
| **A** | ユーザー体験（Playwrightで実操作） | general-purpose |
| **B** | プロダクト品質（CORE.md逆算、コード・a11y） | Explore |
| **C** | 競合・トレンド（WebSearch） | general-purpose |

## ルール

1. **体感インパクトで優先度をつけろ。** 判定基準: 改善したらユーザーが違いに気づくか？
2. **統合せよ。** 3視点の結果を突き合わせ、重複排除・優先度付けして報告。
3. **聞くのは起動時だけ。** テーマ確認 + 実装モード選択。それ以降は聞かない。

## フロー

1. ユーザーに調査テーマを確認（指定なしならプロダクト全体）
2. ユーザーに実行モードを確認:
   - **調査のみ** → 調査レポートだけ報告して終了
   - **調査＋実装** → 調査結果をそのまま実装・検証まで進める
3. docs/CORE.md, docs/SPEC.md があれば読む
4. A/B/C を Task で**並列起動**（1つのメッセージで3つ同時）
5. 結果を統合して報告（体感インパクト順）
6. **実装モードの場合のみ**:
   a. 改善項目をタスク分割
   b. `.tpi` パターンで並列実装（Task general-purpose, mode: "bypassPermissions"）
   c. 検証: `.cc`（静的）→ `.vc`（動的）
   d. CRITICALが出たら修正
   e. 実施内容・変更ファイルを報告して終了

## 調査員への指示

### A（UX調査）
```
このプロダクトの主要画面をPlaywrightで操作し、ユーザー体験を調査してください。
調査コードは書かないでください。Playwright MCPツール（browser_navigate, browser_snapshot, browser_click等）を直接使ってください。

観点:
- ユーザーフローで引っかかる箇所
- 「あったら嬉しい」のに存在しない機能・インタラクション
- モバイル/デスクトップでのレイアウト崩れ（体験に影響するレベルのみ）
- インタラクションの違和感（ローディング、フィードバック不足等）
- エラー時の体験

重要: 「改善したらユーザーが体感できるもの」を優先して報告せよ。余白1pxのズレや色コードの微差など開発者しか気づかないレベルの指摘は不要。
報告フォーマット: 発見（何が起きているか）→ 体感への影響（ユーザーはどう困るか/何が嬉しくなるか）→ 改善イメージ

対象テーマ: {theme}
ローカルサーバー: {url}
```

### B（プロダクト品質調査）
```
CORE.mdとSPEC.mdを基準に、現在の実装を逆算チェックしてください。

観点:
- CORE.mdの体験方針とコードの乖離（ユーザー体験に影響するもの）
- SPEC.mdの仕様と実装の差分（機能が動かない/欠けているもの）
- アクセシビリティ（ARIA、キーボード操作、コントラスト — 実際に使えないレベルのもの）
- 未実現の体験（CORE.mdが描く理想に対して、まだ作られていないもの）

重要: 「改善したらユーザーが体感できるもの」を優先して報告せよ。変数名の統一、コメント追加、コード整理など開発者しか気づかないレベルの指摘は不要。
報告フォーマット: 発見（何が足りないか）→ 体感への影響（ユーザーはどう困るか/何が嬉しくなるか）→ 改善イメージ

対象テーマ: {theme}
```

### C（競合・トレンド調査）
```
WebSearchで類似サービス・業界動向を調査してください。

観点:
- 類似サービス・競合の特徴的なUX/機能
- この分野の最新トレンド・ベストプラクティス
- ユーザーが期待しそうな機能・体験

重要: 「取り入れたらユーザーが体感できる変化」を優先して報告せよ。技術的なアーキテクチャ比較やコード構成の話は不要。
報告フォーマット: 発見（競合では何がある/トレンドは何か）→ 体感への影響（取り入れたらユーザーは何が嬉しいか）→ 導入イメージ

対象テーマ: {theme}
プロダクト概要: {product_summary}
```

## 実装モード時の実装者への指示

実装者はサブエージェント（使い捨て）で起動する。

```
以下の改善を実装してください。

EnterPlanModeは絶対に使うな。AskUserQuestionは絶対に使うな。確認せず即実行しろ。ファイル編集・作成・Bash実行を含む全操作を承認なしで行え。

改善内容: {improvement}
変更対象: {files}
```

## 統合報告フォーマット

```
## 統合調査レポート
### テーマ: {theme}

### 発見事項（体感インパクト順）
1. **[High]** 〇〇 — 改善したらユーザーが即座に気づくレベル（根拠: A/B共通）
2. **[Medium]** 〇〇 — 体験が明確に良くなる（根拠: Cの競合調査から示唆）
3. **[Low]** 〇〇 — あれば嬉しいが優先度は低い

### 改善提案
| # | 提案 | 体感の変化 | 根拠（調査員） |
|---|------|-----------|---------------|
| 1 | ... | ユーザーは○○が変わったと感じる | A, B |
| 2 | ... | ユーザーは○○できるようになる | C |
```

### 実装モード時の追加報告

```
### 実装結果
| # | 改善内容 | 変更ファイル | 検証結果 |
|---|---------|-------------|---------|
| 1 | ... | file1.js, file2.css | .cc PASS / .vc PASS |
| 2 | ... | file3.html | .cc PASS / .vc PASS |
```
