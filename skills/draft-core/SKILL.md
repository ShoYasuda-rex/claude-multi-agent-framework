---
name: draft-core
description: プロダクトの本質（誰の・何の課題）を整理
user_invocable: true
disable-model-invocation: true
argument-hint: "[プロジェクト名 または 要件ドキュメントのパス]"
---

# Core Designer（プロダクトの本質整理）

「誰の・何の課題を・どう解決するか」をプログラムと無関係に整理するスキル。
技術や実装の話には一切触れず、ビジネス・サービスとしての本質を言語化する。
出力は docs/CORE.md。

---

## 起動時の動作

まず $ARGUMENTS がファイルパスかどうかを判定する。

**ファイルパス判定:** $ARGUMENTS が以下のいずれかに該当すればファイルパスとして扱う:
- 拡張子が `.md` / `.txt` / `.pdf` で終わる
- パス区切り（`/` または `\`）を含む

- **ファイルパスである** → インポートモードへ
- **ファイルパスでない** → 以下の通常フローへ（$ARGUMENTS はプロジェクト名として扱う）

docs/CORE.md の存在を確認する（docs/ ディレクトリが存在しない場合は作成する）。

- **存在しない** → 新規作成モードへ
- **存在する** → 編集モードへ

---

## インポートモード

$ARGUMENTS がファイルパスと判定された場合に適用。

### Step 1: ドキュメント読み込み
- Read ツールで $ARGUMENTS のファイルを読み込む
- 読み込み失敗時は「ファイルが見つからなかった。パスを確認して」と伝えて終了

### Step 2: 内容の抽出・整理
- ドキュメントから、出力フォーマットの各セクションに該当する情報を抽出・整理する:
  - 誰のためのサービスか
  - 何に困っているか
  - どうなったら嬉しいか
  - なぜ既存の方法ではダメか
  - やらないこと
  - 一言で言うと
- 抽出結果をチャット上に提示:「持ち込みドキュメントからこう読み取りました」

### Step 3: 不足項目のヒアリング
- 出力フォーマットの全セクションを照合し、カバーされていない項目を特定
- 不足項目のみ AskUserQuestion でヒアリング（カバー済み項目はスキップ）
- ユーザーが「それでいい」と言えばそのまま進む

### Step 4: 壁打ち
- 新規作成モードと同じ壁打ちを行う（課題の解像度・ユーザー像の絞り込み・ゴールの検証可能性）
- 壁打ちで新たに見えたことがあれば内容を更新する

### Step 5: 確認
- 最終的な整理結果を提示し、「これで合ってる？」と確認

### Step 6: 出力
- 出力フォーマットに従って docs/CORE.md を生成する

---

## 新規作成モード

### Step 1: ヒアリング

以下の順序で AskUserQuestion を使って質問する。**1つずつ聞く**（まとめて聞かない）。
ユーザーが「わからない」「まだ決まってない」と答えたら、無理に詰めず「一旦空欄にして次へ進もう」と伝えて先に進む。

1. **誰の課題か**: 「困っている人は誰？どんな状況の人？」
2. **何に困っているか**: 「その人は今、具体的に何に困ってる？」
3. **どうなったら嬉しいか**: 「その人がどうなれば解決？理想の状態は？」
4. **なぜ今の方法ではダメか**: 「既存の解決策（競合・代替手段）の何が足りない？」
5. **やらないこと**: 「このサービスでは明確にやらないことは？」

### Step 2: 軌道修正

ユーザーが以下に逸れたら戻す：

| 逸れた内容 | 戻し方 |
|-----------|--------|
| 技術選定・実装方法 | 「作り方は後。まず誰の何を解決するか固めよう」 |
| 機能リスト | 「機能は手段。まずユーザーの理想の状態を描こう」 |
| 収益モデル・マネタイズ | 「ビジネスモデルは後。まず価値を明確にしよう」 |
| 競合分析の深堀り | 「競合の詳細は別途。今は自分たちの立ち位置を決めよう」 |

### Step 3: 壁打ち

ヒアリング内容をもとに、以下の観点で壁打ちする。1つずつ質問する。

- **課題の解像度**: 「それって本当に困ってること？もっと手前に本質的な課題がない？」
- **ユーザー像の絞り込み**: 「全員に届けようとしてない？最初の1人は誰？」
- **ゴールの検証可能性**: 「それって達成したかどうか、どうやってわかる？」

壁打ちで新たに見えたことがあれば、ヒアリング内容を更新する。

### Step 4: 出力

壁打ち完了後、以下のフォーマットで docs/CORE.md を生成する。

---

## 編集モード

### Step 1: 現状確認

docs/CORE.md を読み込み、要約を提示する：
- 現在の課題定義
- ターゲットユーザー
- 提供する価値
- やらないこと

### Step 2: 変更箇所の確認

「どこをどう見直したい？」とフリーワードで聞く。

### Step 3: 更新

指定された箇所のみ更新して保存する。

---

## 出力フォーマット

docs/CORE.md は以下のフォーマットで生成する。$ARGUMENTS が指定されていればプロジェクト名として使う。

```markdown
# プロジェクト名

## 誰のためのサービスか
（具体的なユーザー像。「30代」のような属性ではなく、状況・文脈で描く）
- ユーザー像1: どんな状況で、何を感じている人か
- ユーザー像2: （必要なら）

## 何に困っているか
（ユーザーが感じている課題。ユーザーの言葉で書く）
- 課題1
- 課題2

## どうなったら嬉しいか
（課題が解決された理想の状態。検証可能な形で）
- [ ] 理想状態1
- [ ] 理想状態2
- [ ] 理想状態3

## なぜ既存の方法ではダメか
（競合・代替手段と比べた時の、このサービスの存在意義）

## やらないこと
（明確にスコープ外とすること）
- xxx
- xxx

## 一言で言うと
（このサービスを1文で説明する。エレベーターピッチ）
```

---

## ルール

1. **人の課題に集中** — 技術・機能・実装の話は絶対に書かない
2. **ユーザーの言葉で書く** — 業界用語やビジネス用語を避ける
3. **状況で描く** — 属性（年齢、性別）ではなく文脈（どんな時に何を感じるか）で書く
4. **検証可能なゴール** — 「便利になる」ではなく「○○ができるようになる」
5. **短く保つ** — 1ページ以内が理想
6. **このスキルで作るのは docs/CORE.md のみ** — 実装計画は EnterPlanMode で立てる

## アンチパターン（これを出力してはいけない）

悪い例（手段を書いている）:
```
## どうなったら嬉しいか
- AIチャットボットで相談できる
- 診断結果をPDFで出力できる
- モバイル対応している
```

良い例（価値を書いている）:
```
## どうなったら嬉しいか
- [ ] 自分の強みを自分の言葉で説明できるようになる
- [ ] 「次に何をすべきか」が具体的に見えている
- [ ] 漠然としたモヤモヤが整理されて、前に進める気持ちになる
```
