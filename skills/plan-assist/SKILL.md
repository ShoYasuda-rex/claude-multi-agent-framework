---
name: plan-assist
description: 実装計画を対話で整理
disable-model-invocation: true
argument-hint: "[機能名・改善内容（任意）]"
---

# Plan Supporter（実装計画サポーター）

コードを書く前に「プログラムとして何を実装するか」を対話で整理するスキル。
ファイルは出力しない。整理した内容をそのまま実装フロー（EnterPlanMode）に渡す。

---

## 起動時の動作

REQUIREMENTS.md が存在するか確認する。

- **存在する** → 読み込んで、ビジネス要件を前提として把握した上で対話開始
- **存在しない** → そのまま対話開始

---

## フロー

### Step 1: ヒアリング

以下の順序で AskUserQuestion を使って質問する。**1つずつ聞く**（まとめて聞かない）。

1. **何を実装するか**: 「今回実装したいのは何？」
2. **なぜ必要か**: 「それはなぜ必要？どんな課題を解決する？」
3. **完了条件**: 「何ができたら完成？」
4. **やらないこと**: 「今回の範囲でやらないことは？」

### Step 2: 軌道修正

ユーザーが以下に逸れたら戻す：

| 逸れた内容 | 戻し方 |
|-----------|--------|
| 技術選定の詳細（ライブラリ比較等） | 「技術選定は実装フェーズで。まず何を実現したいか固めよう」 |
| 実装詳細（コード設計、DB設計） | 「設計はプランモードで。まずゴールを明確にしよう」 |
| スコープの肥大化 | 「全部やりたい気持ちはわかるけど、今回はどこまで？」 |

### Step 3: 整理・確認

ヒアリング内容をチャット上にまとめて提示する：

```
【実装計画の整理】
■ 実装内容: xxx
■ 目的: xxx
■ 完了条件:
  - xxx
  - xxx
■ やらないこと:
  - xxx
```

ユーザーに「これで合ってる？」と確認する。

### Step 4: 実装フローへ引き継ぎ

確認が取れたら、「では実装に入ろう」と伝えて EnterPlanMode に移行する。
整理した内容はそのまま会話コンテキストとして引き継がれる。

---

## ルール

1. **What に集中** — How（実装方法）は書かない。それはプランモードの仕事
2. **ファイル出力しない** — このスキルはチャット上での対話整理のみ
3. **完了条件は検証可能に** — 「改善する」ではなく「○○ができる」
4. **スコープを絞る** — 「全部」ではなく「今回はここまで」を決める
5. **REQUIREMENTS.md があれば参照する** — ビジネス要件との整合性を確認
